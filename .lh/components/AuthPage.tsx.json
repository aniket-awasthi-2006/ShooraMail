{
    "sourceFile": "components/AuthPage.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1766999006456,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766999216755,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,275 @@\n+import React, { useState } from 'react';\r\n+import { motion, AnimatePresence } from 'framer-motion';\r\n+import { Mail, Lock, ArrowRight, User, AlertCircle, CheckCircle } from 'lucide-react';\r\n+import { View, ThemeMode } from '../App';\r\n+import { LogoBlack, LogoWhite } from './Logo';\r\n+import api from '../axios';\r\n+\r\n+const MotionDiv = motion.div as any;\r\n+\r\n+interface UserData {\r\n+  firstName: string;\r\n+  lastName: string;\r\n+  email: string;\r\n+}\r\n+\r\n+interface AuthPageProps {\r\n+  mode: 'signin' | 'signup';\r\n+  onNavigate: (v: View) => void;\r\n+  onNavigate: (v: View, data?: UserData) => void;\r\n+  themeMode: ThemeMode;\r\n+}\r\n+\r\n+const AuthPage: React.FC<AuthPageProps> = ({ mode, onNavigate, themeMode }) => {\r\n+  const isSignIn = mode === 'signin';\r\n+  const isLight = themeMode === 'light';\r\n+  const isColored = themeMode === 'colored';\r\n+  const isDark = themeMode === 'dark';\r\n+  const isNormalMode = isLight || isColored;\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    firstName: '',\r\n+    lastName: '',\r\n+    email: '',\r\n+    password: ''\r\n+  });\r\n+  const [error, setError] = useState<string | null>(null);\r\n+  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+\r\n+  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+    setError(null);\r\n+  };\r\n+\r\n+  const handleAuth = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    setError(null);\r\n+    setIsLoading(true);\r\n+\r\n+    const submitData = {\r\n+      ...formData,\r\n+      email: formData.email.trim().toLowerCase(),\r\n+      firstName: formData.firstName.trim(),\r\n+      lastName: formData.lastName.trim()\r\n+    };\r\n+\r\n+    try {\r\n+      if (isSignIn) {\r\n+        await api.post('/api/auth/login', {\r\n+        const { data } = await api.post('/api/auth/login', {\r\n+          email: submitData.email,\r\n+          password: submitData.password\r\n+        });\r\n+        \r\n+        onNavigate('dashboard');\r\n+        \r\n+        onNavigate('dashboard', data);\r\n+      } else {\r\n+        await api.post('/api/auth/register', submitData);\r\n+        setShowSuccessModal(true);\r\n+      }\r\n+    } catch (err: any) {\r\n+      const status = err.response?.status;\r\n+      const msg = err.response?.data?.message || 'An error occurred';\r\n+\r\n+      if (isSignIn) {\r\n+        if (status === 404 || msg.toLowerCase().includes('not found')) {\r\n+          setError(\"Account not found. You need to sign up first.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      } else {\r\n+        if (status === 409 || msg.toLowerCase().includes('already registered')) {\r\n+          setError(\"This email is already registered. Please login instead.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      }\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-[80vh] flex items-center justify-center px-6\">\r\n+      <MotionDiv\r\n+        initial={{ opacity: 0, y: 20 }}\r\n+        animate={{ opacity: 1, y: 0 }}\r\n+        className={`max-w-md w-full rounded-[40px] shadow-2xl border p-10 flex flex-col gap-8 transition-all duration-700 ${\r\n+          isNormalMode ? 'bg-white border-gray-100' : \r\n+          isDark ? 'bg-[#131416] border-[#25282B]' : \r\n+          'bg-black border-white'\r\n+        }`}\r\n+      >\r\n+        <div className=\"flex justify-center\">\r\n+          <div className={`w-12 h-12 p-2 rounded-2xl flex items-center justify-center transition-all duration-700 ${\r\n+            isColored ? 'bg-[#2D62ED]/10' : \r\n+            isLight ? 'bg-black/5' : \r\n+            'bg-white/10'\r\n+          }`}>\r\n+            {isDark ? (\r\n+              <LogoWhite className=\"w-full h-full\" />\r\n+            ) : (\r\n+              <LogoBlack className=\"w-full h-full\" style={{ fill: isColored ? '#2D62ED' : 'black' }} />\r\n+            )}\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <div className=\"text-center flex flex-col gap-2\">\r\n+          <h2 className={`text-3xl font-black tracking-tighter transition-colors ${isColored ? 'text-[#2D62ED]' : ''}`}>\r\n+            {isSignIn ? 'Welcome back.' : 'Create your workspace.'}\r\n+          </h2>\r\n+          <p className=\"opacity-60 text-sm font-medium\">\r\n+            {isSignIn \r\n+              ? 'Enter your credentials to access ShooraMail' \r\n+              : 'Join thousands of users organizing their digital lives.'}\r\n+          </p>\r\n+        </div>\r\n+\r\n+      \r\n+\r\n+     \r\n+\r\n+        {error && (\r\n+          <div className={`p-3 rounded-xl flex items-start gap-3 text-sm ${\r\n+            isNormalMode ? 'bg-red-50 text-red-600' : 'bg-red-900/20 text-red-400'\r\n+          }`}>\r\n+            <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n+            <div className=\"flex flex-col gap-1\">\r\n+              <span>{error}</span>\r\n+              {error.includes('not found') && isSignIn && (\r\n+                <button \r\n+                  onClick={() => onNavigate('signup')}\r\n+                  className=\"text-left font-bold underline underline-offset-2 hover:opacity-80\"\r\n+                >\r\n+                  Sign up now\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </div>\r\n+        )}\r\n+\r\n+        <form className=\"flex flex-col gap-4\" onSubmit={handleAuth}>\r\n+          {!isSignIn && (\r\n+            <div className=\"flex gap-4\">\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"firstName\"\r\n+                  value={formData.firstName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"First Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"lastName\"\r\n+                  value={formData.lastName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"Last Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+            </div>\r\n+          )}\r\n+\r\n+          <div className=\"relative\">\r\n+            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"email\"\r\n+              value={formData.email}\r\n+              onChange={handleChange}\r\n+              type=\"email\" \r\n+              placeholder=\"Email address\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <div className=\"relative\">\r\n+            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"password\"\r\n+              value={formData.password}\r\n+              onChange={handleChange}\r\n+              type=\"password\" \r\n+              placeholder=\"Password\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <button \r\n+            type=\"submit\"\r\n+            disabled={isLoading}\r\n+            className={`w-full py-4 mt-2 rounded-full font-bold shadow-xl transition-all duration-700 flex items-center justify-center gap-2 transform active:scale-95 ${\r\n+              isColored ? 'bg-[#2D62ED] text-white hover:bg-blue-700' :\r\n+              isLight ? 'bg-black text-white hover:bg-gray-800' : \r\n+              'bg-white text-black hover:bg-gray-100'\r\n+            } ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n+          >\r\n+            {isLoading ? 'Processing...' : (isSignIn ? 'Sign In' : 'Sign Up')}\r\n+            <ArrowRight className=\"w-4 h-4\" />\r\n+          </button>\r\n+        </form>\r\n+\r\n+        <p className=\"text-center text-sm font-medium opacity-60\">\r\n+          {isSignIn ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+          <button \r\n+            onClick={() => onNavigate(isSignIn ? 'signup' : 'signin')}\r\n+            className={`font-bold hover:underline underline-offset-4 transition-colors ${isColored ? 'text-[#2D62ED]' : isLight ? 'text-black' : 'text-white'}`}\r\n+          >\r\n+            {isSignIn ? 'Sign Up' : 'Log In'}\r\n+          </button>\r\n+        </p>\r\n+      </MotionDiv>\r\n+\r\n+      <AnimatePresence>\r\n+        {showSuccessModal && (\r\n+          <motion.div\r\n+            initial={{ opacity: 0 }}\r\n+            animate={{ opacity: 1 }}\r\n+            exit={{ opacity: 0 }}\r\n+            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n+          >\r\n+            <motion.div\r\n+              initial={{ scale: 0.9, opacity: 0 }}\r\n+              animate={{ scale: 1, opacity: 1 }}\r\n+              exit={{ scale: 0.9, opacity: 0 }}\r\n+              className={`max-w-sm w-full p-8 rounded-3xl shadow-2xl text-center flex flex-col items-center gap-4 ${\r\n+                isNormalMode ? 'bg-white' : 'bg-[#131416] border border-[#25282B] text-white'\r\n+              }`}\r\n+            >\r\n+              <div className=\"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-2\">\r\n+                <CheckCircle className=\"w-8 h-8\" />\r\n+              </div>\r\n+              <h3 className=\"text-2xl font-bold\">Registration successful!</h3>\r\n+              <p className=\"opacity-60\">A verification link has been sent to your inbox. Please verify to continue.</p>\r\n+              <button\r\n+                onClick={() => { setShowSuccessModal(false); onNavigate('signin'); }}\r\n+                className=\"w-full py-3 rounded-xl bg-black text-white font-bold mt-4 hover:bg-gray-800 transition-colors\"\r\n+              >\r\n+                Go to Login\r\n+              </button>\r\n+            </motion.div>\r\n+          </motion.div>\r\n+        )}\r\n+      </AnimatePresence>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default AuthPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766999222419,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,8 @@\n }\r\n \r\n interface AuthPageProps {\r\n   mode: 'signin' | 'signup';\r\n-  onNavigate: (v: View) => void;\r\n   onNavigate: (v: View, data?: UserData) => void;\r\n   themeMode: ThemeMode;\r\n }\r\n \r\n@@ -55,16 +54,13 @@\n     };\r\n \r\n     try {\r\n       if (isSignIn) {\r\n-        await api.post('/api/auth/login', {\r\n         const { data } = await api.post('/api/auth/login', {\r\n           email: submitData.email,\r\n           password: submitData.password\r\n         });\r\n         \r\n-        onNavigate('dashboard');\r\n-        \r\n         onNavigate('dashboard', data);\r\n       } else {\r\n         await api.post('/api/auth/register', submitData);\r\n         setShowSuccessModal(true);\r\n@@ -271,271 +267,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default AuthPage;\n-import React, { useState } from 'react';\r\n-import { motion, AnimatePresence } from 'framer-motion';\r\n-import { Mail, Lock, ArrowRight, User, AlertCircle, CheckCircle } from 'lucide-react';\r\n-import { View, ThemeMode } from '../App';\r\n-import { LogoBlack, LogoWhite } from './Logo';\r\n-import api from '../axios';\r\n-\r\n-const MotionDiv = motion.div as any;\r\n-\r\n-interface AuthPageProps {\r\n-  mode: 'signin' | 'signup';\r\n-  onNavigate: (v: View) => void;\r\n-  themeMode: ThemeMode;\r\n-}\r\n-\r\n-const AuthPage: React.FC<AuthPageProps> = ({ mode, onNavigate, themeMode }) => {\r\n-  const isSignIn = mode === 'signin';\r\n-  const isLight = themeMode === 'light';\r\n-  const isColored = themeMode === 'colored';\r\n-  const isDark = themeMode === 'dark';\r\n-  const isNormalMode = isLight || isColored;\r\n-\r\n-  const [formData, setFormData] = useState({\r\n-    firstName: '',\r\n-    lastName: '',\r\n-    email: '',\r\n-    password: ''\r\n-  });\r\n-  const [error, setError] = useState<string | null>(null);\r\n-  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n-  const [isLoading, setIsLoading] = useState(false);\r\n-\r\n-  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n-    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n-    setError(null);\r\n-  };\r\n-\r\n-  const handleAuth = async (e: React.FormEvent) => {\r\n-    e.preventDefault();\r\n-    setError(null);\r\n-    setIsLoading(true);\r\n-\r\n-    const submitData = {\r\n-      ...formData,\r\n-      email: formData.email.trim().toLowerCase(),\r\n-      firstName: formData.firstName.trim(),\r\n-      lastName: formData.lastName.trim()\r\n-    };\r\n-\r\n-    try {\r\n-      if (isSignIn) {\r\n-        await api.post('/api/auth/login', {\r\n-          email: submitData.email,\r\n-          password: submitData.password\r\n-        });\r\n-        \r\n-        onNavigate('dashboard');\r\n-        \r\n-      } else {\r\n-        await api.post('/api/auth/register', submitData);\r\n-        setShowSuccessModal(true);\r\n-      }\r\n-    } catch (err: any) {\r\n-      const status = err.response?.status;\r\n-      const msg = err.response?.data?.message || 'An error occurred';\r\n-\r\n-      if (isSignIn) {\r\n-        if (status === 404 || msg.toLowerCase().includes('not found')) {\r\n-          setError(\"Account not found. You need to sign up first.\");\r\n-        } else {\r\n-          setError(msg);\r\n-        }\r\n-      } else {\r\n-        if (status === 409 || msg.toLowerCase().includes('already registered')) {\r\n-          setError(\"This email is already registered. Please login instead.\");\r\n-        } else {\r\n-          setError(msg);\r\n-        }\r\n-      }\r\n-    } finally {\r\n-      setIsLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  return (\r\n-    <div className=\"min-h-[80vh] flex items-center justify-center px-6\">\r\n-      <MotionDiv\r\n-        initial={{ opacity: 0, y: 20 }}\r\n-        animate={{ opacity: 1, y: 0 }}\r\n-        className={`max-w-md w-full rounded-[40px] shadow-2xl border p-10 flex flex-col gap-8 transition-all duration-700 ${\r\n-          isNormalMode ? 'bg-white border-gray-100' : \r\n-          isDark ? 'bg-[#131416] border-[#25282B]' : \r\n-          'bg-black border-white'\r\n-        }`}\r\n-      >\r\n-        <div className=\"flex justify-center\">\r\n-          <div className={`w-12 h-12 p-2 rounded-2xl flex items-center justify-center transition-all duration-700 ${\r\n-            isColored ? 'bg-[#2D62ED]/10' : \r\n-            isLight ? 'bg-black/5' : \r\n-            'bg-white/10'\r\n-          }`}>\r\n-            {isDark ? (\r\n-              <LogoWhite className=\"w-full h-full\" />\r\n-            ) : (\r\n-              <LogoBlack className=\"w-full h-full\" style={{ fill: isColored ? '#2D62ED' : 'black' }} />\r\n-            )}\r\n-          </div>\r\n-        </div>\r\n-\r\n-        <div className=\"text-center flex flex-col gap-2\">\r\n-          <h2 className={`text-3xl font-black tracking-tighter transition-colors ${isColored ? 'text-[#2D62ED]' : ''}`}>\r\n-            {isSignIn ? 'Welcome back.' : 'Create your workspace.'}\r\n-          </h2>\r\n-          <p className=\"opacity-60 text-sm font-medium\">\r\n-            {isSignIn \r\n-              ? 'Enter your credentials to access ShooraMail' \r\n-              : 'Join thousands of users organizing their digital lives.'}\r\n-          </p>\r\n-        </div>\r\n-\r\n-      \r\n-\r\n-     \r\n-\r\n-        {error && (\r\n-          <div className={`p-3 rounded-xl flex items-start gap-3 text-sm ${\r\n-            isNormalMode ? 'bg-red-50 text-red-600' : 'bg-red-900/20 text-red-400'\r\n-          }`}>\r\n-            <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n-            <div className=\"flex flex-col gap-1\">\r\n-              <span>{error}</span>\r\n-              {error.includes('not found') && isSignIn && (\r\n-                <button \r\n-                  onClick={() => onNavigate('signup')}\r\n-                  className=\"text-left font-bold underline underline-offset-2 hover:opacity-80\"\r\n-                >\r\n-                  Sign up now\r\n-                </button>\r\n-              )}\r\n-            </div>\r\n-          </div>\r\n-        )}\r\n-\r\n-        <form className=\"flex flex-col gap-4\" onSubmit={handleAuth}>\r\n-          {!isSignIn && (\r\n-            <div className=\"flex gap-4\">\r\n-              <div className=\"relative flex-1\">\r\n-                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n-                <input \r\n-                  required\r\n-                  name=\"firstName\"\r\n-                  value={formData.firstName}\r\n-                  onChange={handleChange}\r\n-                  type=\"text\" \r\n-                  placeholder=\"First Name\"\r\n-                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n-                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n-                  }`}\r\n-                />\r\n-              </div>\r\n-              <div className=\"relative flex-1\">\r\n-                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n-                <input \r\n-                  required\r\n-                  name=\"lastName\"\r\n-                  value={formData.lastName}\r\n-                  onChange={handleChange}\r\n-                  type=\"text\" \r\n-                  placeholder=\"Last Name\"\r\n-                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n-                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n-                  }`}\r\n-                />\r\n-              </div>\r\n-            </div>\r\n-          )}\r\n-\r\n-          <div className=\"relative\">\r\n-            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n-            <input \r\n-              required\r\n-              name=\"email\"\r\n-              value={formData.email}\r\n-              onChange={handleChange}\r\n-              type=\"email\" \r\n-              placeholder=\"Email address\"\r\n-              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n-                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n-              }`}\r\n-            />\r\n-          </div>\r\n-          <div className=\"relative\">\r\n-            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n-            <input \r\n-              required\r\n-              name=\"password\"\r\n-              value={formData.password}\r\n-              onChange={handleChange}\r\n-              type=\"password\" \r\n-              placeholder=\"Password\"\r\n-              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n-                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n-              }`}\r\n-            />\r\n-          </div>\r\n-          <button \r\n-            type=\"submit\"\r\n-            disabled={isLoading}\r\n-            className={`w-full py-4 mt-2 rounded-full font-bold shadow-xl transition-all duration-700 flex items-center justify-center gap-2 transform active:scale-95 ${\r\n-              isColored ? 'bg-[#2D62ED] text-white hover:bg-blue-700' :\r\n-              isLight ? 'bg-black text-white hover:bg-gray-800' : \r\n-              'bg-white text-black hover:bg-gray-100'\r\n-            } ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n-          >\r\n-            {isLoading ? 'Processing...' : (isSignIn ? 'Sign In' : 'Sign Up')}\r\n-            <ArrowRight className=\"w-4 h-4\" />\r\n-          </button>\r\n-        </form>\r\n-\r\n-        <p className=\"text-center text-sm font-medium opacity-60\">\r\n-          {isSignIn ? \"Don't have an account? \" : \"Already have an account? \"}\r\n-          <button \r\n-            onClick={() => onNavigate(isSignIn ? 'signup' : 'signin')}\r\n-            className={`font-bold hover:underline underline-offset-4 transition-colors ${isColored ? 'text-[#2D62ED]' : isLight ? 'text-black' : 'text-white'}`}\r\n-          >\r\n-            {isSignIn ? 'Sign Up' : 'Log In'}\r\n-          </button>\r\n-        </p>\r\n-      </MotionDiv>\r\n-\r\n-      <AnimatePresence>\r\n-        {showSuccessModal && (\r\n-          <motion.div\r\n-            initial={{ opacity: 0 }}\r\n-            animate={{ opacity: 1 }}\r\n-            exit={{ opacity: 0 }}\r\n-            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n-          >\r\n-            <motion.div\r\n-              initial={{ scale: 0.9, opacity: 0 }}\r\n-              animate={{ scale: 1, opacity: 1 }}\r\n-              exit={{ scale: 0.9, opacity: 0 }}\r\n-              className={`max-w-sm w-full p-8 rounded-3xl shadow-2xl text-center flex flex-col items-center gap-4 ${\r\n-                isNormalMode ? 'bg-white' : 'bg-[#131416] border border-[#25282B] text-white'\r\n-              }`}\r\n-            >\r\n-              <div className=\"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-2\">\r\n-                <CheckCircle className=\"w-8 h-8\" />\r\n-              </div>\r\n-              <h3 className=\"text-2xl font-bold\">Registration successful!</h3>\r\n-              <p className=\"opacity-60\">A verification link has been sent to your inbox. Please verify to continue.</p>\r\n-              <button\r\n-                onClick={() => { setShowSuccessModal(false); onNavigate('signin'); }}\r\n-                className=\"w-full py-3 rounded-xl bg-black text-white font-bold mt-4 hover:bg-gray-800 transition-colors\"\r\n-              >\r\n-                Go to Login\r\n-              </button>\r\n-            </motion.div>\r\n-          </motion.div>\r\n-        )}\r\n-      </AnimatePresence>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n export default AuthPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766999510268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,272 @@\n+import React, { useState } from 'react';\r\n+import { motion, AnimatePresence } from 'framer-motion';\r\n+import { Mail, Lock, ArrowRight, User, AlertCircle, CheckCircle } from 'lucide-react';\r\n+import { View, ThemeMode } from '../App';\r\n+import { LogoBlack, LogoWhite } from './Logo';\r\n+import api from '../axios';\r\n+\r\n+const MotionDiv = motion.div as any;\r\n+\r\n+interface UserData {\r\n+  firstName: string;\r\n+  lastName: string;\r\n+  email: string;\r\n+}\r\n+\r\n+interface AuthPageProps {\r\n+  mode: 'signin' | 'signup';\r\n+  onNavigate: (v: View, data?: UserData) => void;\r\n+  themeMode: ThemeMode;\r\n+}\r\n+\r\n+const AuthPage: React.FC<AuthPageProps> = ({ mode, onNavigate, themeMode }) => {\r\n+  const isSignIn = mode === 'signin';\r\n+  const isLight = themeMode === 'light';\r\n+  const isColored = themeMode === 'colored';\r\n+  const isDark = themeMode === 'dark';\r\n+  const isNormalMode = isLight || isColored;\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    firstName: '',\r\n+    lastName: '',\r\n+    email: '',\r\n+    password: ''\r\n+  });\r\n+  const [error, setError] = useState<string | null>(null);\r\n+  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+\r\n+  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+    setError(null);\r\n+  };\r\n+\r\n+  const handleAuth = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    setError(null);\r\n+    setIsLoading(true);\r\n+\r\n+    const submitData = {\r\n+      ...formData,\r\n+      email: formData.email.trim().toLowerCase(),\r\n+      firstName: formData.firstName.trim(),\r\n+      lastName: formData.lastName.trim()\r\n+    };\r\n+\r\n+    try {\r\n+      if (isSignIn) {\r\n+        const { data } = await api.post('/api/auth/login', {\r\n+          email: submitData.email,\r\n+          password: submitData.password\r\n+        });\r\n+        \r\n+        onNavigate('dashboard', data);\r\n+        \r\n+      } else {\r\n+        await api.post('/api/auth/register', submitData);\r\n+        setShowSuccessModal(true);\r\n+      }\r\n+    } catch (err: any) {\r\n+      const status = err.response?.status;\r\n+      const msg = err.response?.data?.message || 'An error occurred';\r\n+\r\n+      if (isSignIn) {\r\n+        if (status === 404 || msg.toLowerCase().includes('not found')) {\r\n+          setError(\"Account not found. You need to sign up first.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      } else {\r\n+        if (status === 409 || msg.toLowerCase().includes('already registered')) {\r\n+          setError(\"This email is already registered. Please login instead.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      }\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-[80vh] flex items-center justify-center px-6\">\r\n+      <MotionDiv\r\n+        initial={{ opacity: 0, y: 20 }}\r\n+        animate={{ opacity: 1, y: 0 }}\r\n+        className={`max-w-md w-full rounded-[40px] shadow-2xl border p-10 flex flex-col gap-8 transition-all duration-700 ${\r\n+          isNormalMode ? 'bg-white border-gray-100' : \r\n+          isDark ? 'bg-[#131416] border-[#25282B]' : \r\n+          'bg-black border-white'\r\n+        }`}\r\n+      >\r\n+        <div className=\"flex justify-center\">\r\n+          <div className={`w-12 h-12 p-2 rounded-2xl flex items-center justify-center transition-all duration-700 ${\r\n+            isColored ? 'bg-[#2D62ED]/10' : \r\n+            isLight ? 'bg-black/5' : \r\n+            'bg-white/10'\r\n+          }`}>\r\n+            {isDark ? (\r\n+              <LogoWhite className=\"w-full h-full\" />\r\n+            ) : (\r\n+              <LogoBlack className=\"w-full h-full\" style={{ fill: isColored ? '#2D62ED' : 'black' }} />\r\n+            )}\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <div className=\"text-center flex flex-col gap-2\">\r\n+          <h2 className={`text-3xl font-black tracking-tighter transition-colors ${isColored ? 'text-[#2D62ED]' : ''}`}>\r\n+            {isSignIn ? 'Welcome back.' : 'Create your workspace.'}\r\n+          </h2>\r\n+          <p className=\"opacity-60 text-sm font-medium\">\r\n+            {isSignIn \r\n+              ? 'Enter your credentials to access ShooraMail' \r\n+              : 'Join thousands of users organizing their digital lives.'}\r\n+          </p>\r\n+        </div>\r\n+\r\n+      \r\n+\r\n+     \r\n+\r\n+        {error && (\r\n+          <div className={`p-3 rounded-xl flex items-start gap-3 text-sm ${\r\n+            isNormalMode ? 'bg-red-50 text-red-600' : 'bg-red-900/20 text-red-400'\r\n+          }`}>\r\n+            <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n+            <div className=\"flex flex-col gap-1\">\r\n+              <span>{error}</span>\r\n+              {error.includes('not found') && isSignIn && (\r\n+                <button \r\n+                  onClick={() => onNavigate('signup')}\r\n+                  className=\"text-left font-bold underline underline-offset-2 hover:opacity-80\"\r\n+                >\r\n+                  Sign up now\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </div>\r\n+        )}\r\n+\r\n+        <form className=\"flex flex-col gap-4\" onSubmit={handleAuth}>\r\n+          {!isSignIn && (\r\n+            <div className=\"flex gap-4\">\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"firstName\"\r\n+                  value={formData.firstName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"First Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"lastName\"\r\n+                  value={formData.lastName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"Last Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+            </div>\r\n+          )}\r\n+\r\n+          <div className=\"relative\">\r\n+            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"email\"\r\n+              value={formData.email}\r\n+              onChange={handleChange}\r\n+              type=\"email\" \r\n+              placeholder=\"Email address\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <div className=\"relative\">\r\n+            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"password\"\r\n+              value={formData.password}\r\n+              onChange={handleChange}\r\n+              type=\"password\" \r\n+              placeholder=\"Password\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <button \r\n+            type=\"submit\"\r\n+            disabled={isLoading}\r\n+            className={`w-full py-4 mt-2 rounded-full font-bold shadow-xl transition-all duration-700 flex items-center justify-center gap-2 transform active:scale-95 ${\r\n+              isColored ? 'bg-[#2D62ED] text-white hover:bg-blue-700' :\r\n+              isLight ? 'bg-black text-white hover:bg-gray-800' : \r\n+              'bg-white text-black hover:bg-gray-100'\r\n+            } ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n+          >\r\n+            {isLoading ? 'Processing...' : (isSignIn ? 'Sign In' : 'Sign Up')}\r\n+            <ArrowRight className=\"w-4 h-4\" />\r\n+          </button>\r\n+        </form>\r\n+\r\n+        <p className=\"text-center text-sm font-medium opacity-60\">\r\n+          {isSignIn ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+          <button \r\n+            onClick={() => onNavigate(isSignIn ? 'signup' : 'signin')}\r\n+            className={`font-bold hover:underline underline-offset-4 transition-colors ${isColored ? 'text-[#2D62ED]' : isLight ? 'text-black' : 'text-white'}`}\r\n+          >\r\n+            {isSignIn ? 'Sign Up' : 'Log In'}\r\n+          </button>\r\n+        </p>\r\n+      </MotionDiv>\r\n+\r\n+      <AnimatePresence>\r\n+        {showSuccessModal && (\r\n+          <motion.div\r\n+            initial={{ opacity: 0 }}\r\n+            animate={{ opacity: 1 }}\r\n+            exit={{ opacity: 0 }}\r\n+            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n+          >\r\n+            <motion.div\r\n+              initial={{ scale: 0.9, opacity: 0 }}\r\n+              animate={{ scale: 1, opacity: 1 }}\r\n+              exit={{ scale: 0.9, opacity: 0 }}\r\n+              className={`max-w-sm w-full p-8 rounded-3xl shadow-2xl text-center flex flex-col items-center gap-4 ${\r\n+                isNormalMode ? 'bg-white' : 'bg-[#131416] border border-[#25282B] text-white'\r\n+              }`}\r\n+            >\r\n+              <div className=\"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-2\">\r\n+                <CheckCircle className=\"w-8 h-8\" />\r\n+              </div>\r\n+              <h3 className=\"text-2xl font-bold\">Registration successful!</h3>\r\n+              <p className=\"opacity-60\">A verification link has been sent to your inbox. Please verify to continue.</p>\r\n+              <button\r\n+                onClick={() => { setShowSuccessModal(false); onNavigate('signin'); }}\r\n+                className=\"w-full py-3 rounded-xl bg-black text-white font-bold mt-4 hover:bg-gray-800 transition-colors\"\r\n+              >\r\n+                Go to Login\r\n+              </button>\r\n+            </motion.div>\r\n+          </motion.div>\r\n+        )}\r\n+      </AnimatePresence>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default AuthPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766999564730,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -269,5 +269,5 @@\n     </div>\r\n   );\r\n };\r\n \r\n-export default AuthPag\n\\ No newline at end of file\n+export default AuthPage;\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767002316401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,271 @@\n+import React, { useState } from 'react';\r\n+import { motion, AnimatePresence } from 'framer-motion';\r\n+import { Mail, Lock, ArrowRight, User, AlertCircle, CheckCircle } from 'lucide-react';\r\n+import { View, ThemeMode } from '../App';\r\n+import { LogoBlack, LogoWhite } from './Logo';\r\n+import api from '../axios';\r\n+\r\n+const MotionDiv = motion.div as any;\r\n+\r\n+interface UserData {\r\n+  firstName: string;\r\n+  lastName: string;\r\n+  email: string;\r\n+}\r\n+\r\n+interface AuthPageProps {\r\n+  mode: 'signin' | 'signup';\r\n+  onNavigate: (v: View, data?: UserData) => void;\r\n+  themeMode: ThemeMode;\r\n+}\r\n+\r\n+const AuthPage: React.FC<AuthPageProps> = ({ mode, onNavigate, themeMode }) => {\r\n+  const isSignIn = mode === 'signin';\r\n+  const isLight = themeMode === 'light';\r\n+  const isColored = themeMode === 'colored';\r\n+  const isDark = themeMode === 'dark';\r\n+  const isNormalMode = isLight || isColored;\r\n+\r\n+  const [formData, setFormData] = useState({\r\n+    firstName: '',\r\n+    lastName: '',\r\n+    email: '',\r\n+    password: ''\r\n+  });\r\n+  const [error, setError] = useState<string | null>(null);\r\n+  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n+  const [isLoading, setIsLoading] = useState(false);\r\n+\r\n+  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n+    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n+    setError(null);\r\n+  };\r\n+\r\n+  const handleAuth = async (e: React.FormEvent) => {\r\n+    e.preventDefault();\r\n+    setError(null);\r\n+    setIsLoading(true);\r\n+\r\n+    const submitData = {\r\n+      ...formData,\r\n+      email: formData.email.trim().toLowerCase(),\r\n+      firstName: formData.firstName.trim(),\r\n+      lastName: formData.lastName.trim()\r\n+    };\r\n+\r\n+    try {\r\n+      if (isSignIn) {\r\n+        const { data } = await api.post('/api/auth/login', {\r\n+          email: submitData.email,\r\n+          password: submitData.password\r\n+        });\r\n+        \r\n+        onNavigate('dashboard', data);\r\n+      } else {\r\n+        await api.post('/api/auth/register', submitData);\r\n+        setShowSuccessModal(true);\r\n+      }\r\n+    } catch (err: any) {\r\n+      const status = err.response?.status;\r\n+      const msg = err.response?.data?.message || 'An error occurred';\r\n+\r\n+      if (isSignIn) {\r\n+        if (status === 404 || msg.toLowerCase().includes('not found')) {\r\n+          setError(\"Account not found. You need to sign up first.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      } else {\r\n+        if (status === 409 || msg.toLowerCase().includes('already registered')) {\r\n+          setError(\"This email is already registered. Please login instead.\");\r\n+        } else {\r\n+          setError(msg);\r\n+        }\r\n+      }\r\n+    } finally {\r\n+      setIsLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  return (\r\n+    <div className=\"min-h-[80vh] flex items-start justify-center px-6 pt-20\">\r\n+      <MotionDiv\r\n+        initial={{ opacity: 0, y: 20 }}\r\n+        animate={{ opacity: 1, y: 0 }}\r\n+        className={`max-w-md w-full rounded-[40px] shadow-2xl border p-10 flex flex-col gap-8 transition-all duration-700 ${\r\n+          isNormalMode ? 'bg-white border-gray-100' : \r\n+          isDark ? 'bg-[#131416] border-[#25282B]' : \r\n+          'bg-black border-white'\r\n+        }`}\r\n+      >\r\n+        <div className=\"flex justify-center\">\r\n+          <div className={`w-12 h-12 p-2 rounded-2xl flex items-center justify-center transition-all duration-700 ${\r\n+            isColored ? 'bg-[#2D62ED]/10' : \r\n+            isLight ? 'bg-black/5' : \r\n+            'bg-white/10'\r\n+          }`}>\r\n+            {isDark ? (\r\n+              <LogoWhite className=\"w-full h-full\" />\r\n+            ) : (\r\n+              <LogoBlack className=\"w-full h-full\" style={{ fill: isColored ? '#2D62ED' : 'black' }} />\r\n+            )}\r\n+          </div>\r\n+        </div>\r\n+\r\n+        <div className=\"text-center flex flex-col gap-2\">\r\n+          <h2 className={`text-3xl font-black tracking-tighter transition-colors ${isColored ? 'text-[#2D62ED]' : ''}`}>\r\n+            {isSignIn ? 'Welcome back.' : 'Create your workspace.'}\r\n+          </h2>\r\n+          <p className=\"opacity-60 text-sm font-medium\">\r\n+            {isSignIn \r\n+              ? 'Enter your credentials to access ShooraMail' \r\n+              : 'Join thousands of users organizing their digital lives.'}\r\n+          </p>\r\n+        </div>\r\n+\r\n+      \r\n+\r\n+     \r\n+\r\n+        {error && (\r\n+          <div className={`p-3 rounded-xl flex items-start gap-3 text-sm ${\r\n+            isNormalMode ? 'bg-red-50 text-red-600' : 'bg-red-900/20 text-red-400'\r\n+          }`}>\r\n+            <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n+            <div className=\"flex flex-col gap-1\">\r\n+              <span>{error}</span>\r\n+              {error.includes('not found') && isSignIn && (\r\n+                <button \r\n+                  onClick={() => onNavigate('signup')}\r\n+                  className=\"text-left font-bold underline underline-offset-2 hover:opacity-80\"\r\n+                >\r\n+                  Sign up now\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </div>\r\n+        )}\r\n+\r\n+        <form className=\"flex flex-col gap-4\" onSubmit={handleAuth}>\r\n+          {!isSignIn && (\r\n+            <div className=\"flex gap-4\">\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"firstName\"\r\n+                  value={formData.firstName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"First Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+              <div className=\"relative flex-1\">\r\n+                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+                <input \r\n+                  required\r\n+                  name=\"lastName\"\r\n+                  value={formData.lastName}\r\n+                  onChange={handleChange}\r\n+                  type=\"text\" \r\n+                  placeholder=\"Last Name\"\r\n+                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+                  }`}\r\n+                />\r\n+              </div>\r\n+            </div>\r\n+          )}\r\n+\r\n+          <div className=\"relative\">\r\n+            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"email\"\r\n+              value={formData.email}\r\n+              onChange={handleChange}\r\n+              type=\"email\" \r\n+              placeholder=\"Email address\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <div className=\"relative\">\r\n+            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n+            <input \r\n+              required\r\n+              name=\"password\"\r\n+              value={formData.password}\r\n+              onChange={handleChange}\r\n+              type=\"password\" \r\n+              placeholder=\"Password\"\r\n+              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n+                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n+              }`}\r\n+            />\r\n+          </div>\r\n+          <button \r\n+            type=\"submit\"\r\n+            disabled={isLoading}\r\n+            className={`w-full py-4 mt-2 rounded-full font-bold shadow-xl transition-all duration-700 flex items-center justify-center gap-2 transform active:scale-95 ${\r\n+              isColored ? 'bg-[#2D62ED] text-white hover:bg-blue-700' :\r\n+              isLight ? 'bg-black text-white hover:bg-gray-800' : \r\n+              'bg-white text-black hover:bg-gray-100'\r\n+            } ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n+          >\r\n+            {isLoading ? 'Processing...' : (isSignIn ? 'Sign In' : 'Sign Up')}\r\n+            <ArrowRight className=\"w-4 h-4\" />\r\n+          </button>\r\n+        </form>\r\n+\r\n+        <p className=\"text-center text-sm font-medium opacity-60\">\r\n+          {isSignIn ? \"Don't have an account? \" : \"Already have an account? \"}\r\n+          <button \r\n+            onClick={() => onNavigate(isSignIn ? 'signup' : 'signin')}\r\n+            className={`font-bold hover:underline underline-offset-4 transition-colors ${isColored ? 'text-[#2D62ED]' : isLight ? 'text-black' : 'text-white'}`}\r\n+          >\r\n+            {isSignIn ? 'Sign Up' : 'Log In'}\r\n+          </button>\r\n+        </p>\r\n+      </MotionDiv>\r\n+\r\n+      <AnimatePresence>\r\n+        {showSuccessModal && (\r\n+          <motion.div\r\n+            initial={{ opacity: 0 }}\r\n+            animate={{ opacity: 1 }}\r\n+            exit={{ opacity: 0 }}\r\n+            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n+          >\r\n+            <motion.div\r\n+              initial={{ scale: 0.9, opacity: 0 }}\r\n+              animate={{ scale: 1, opacity: 1 }}\r\n+              exit={{ scale: 0.9, opacity: 0 }}\r\n+              className={`max-w-sm w-full p-8 rounded-3xl shadow-2xl text-center flex flex-col items-center gap-4 ${\r\n+                isNormalMode ? 'bg-white' : 'bg-[#131416] border border-[#25282B] text-white'\r\n+              }`}\r\n+            >\r\n+              <div className=\"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-2\">\r\n+                <CheckCircle className=\"w-8 h-8\" />\r\n+              </div>\r\n+              <h3 className=\"text-2xl font-bold\">Registration successful!</h3>\r\n+              <p className=\"opacity-60\">A verification link has been sent to your inbox. Please verify to continue.</p>\r\n+              <button\r\n+                onClick={() => { setShowSuccessModal(false); onNavigate('signin'); }}\r\n+                className=\"w-full py-3 rounded-xl bg-black text-white font-bold mt-4 hover:bg-gray-800 transition-colors\"\r\n+              >\r\n+                Go to Login\r\n+              </button>\r\n+            </motion.div>\r\n+          </motion.div>\r\n+        )}\r\n+      </AnimatePresence>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default AuthPage;\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766999006456,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Mail, Lock, ArrowRight, User, AlertCircle, CheckCircle } from 'lucide-react';\r\nimport { View, ThemeMode } from '../App';\r\nimport { LogoBlack, LogoWhite } from './Logo';\r\nimport api from '../axios';\r\n\r\nconst MotionDiv = motion.div as any;\r\n\r\ninterface AuthPageProps {\r\n  mode: 'signin' | 'signup';\r\n  onNavigate: (v: View) => void;\r\n  themeMode: ThemeMode;\r\n}\r\n\r\nconst AuthPage: React.FC<AuthPageProps> = ({ mode, onNavigate, themeMode }) => {\r\n  const isSignIn = mode === 'signin';\r\n  const isLight = themeMode === 'light';\r\n  const isColored = themeMode === 'colored';\r\n  const isDark = themeMode === 'dark';\r\n  const isNormalMode = isLight || isColored;\r\n\r\n  const [formData, setFormData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setError(null);\r\n  };\r\n\r\n  const handleAuth = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setIsLoading(true);\r\n\r\n    const submitData = {\r\n      ...formData,\r\n      email: formData.email.trim().toLowerCase(),\r\n      firstName: formData.firstName.trim(),\r\n      lastName: formData.lastName.trim()\r\n    };\r\n\r\n    try {\r\n      if (isSignIn) {\r\n        await api.post('/api/auth/login', {\r\n          email: submitData.email,\r\n          password: submitData.password\r\n        });\r\n        \r\n        onNavigate('dashboard');\r\n        \r\n      } else {\r\n        await api.post('/api/auth/register', submitData);\r\n        setShowSuccessModal(true);\r\n      }\r\n    } catch (err: any) {\r\n      const status = err.response?.status;\r\n      const msg = err.response?.data?.message || 'An error occurred';\r\n\r\n      if (isSignIn) {\r\n        if (status === 404 || msg.toLowerCase().includes('not found')) {\r\n          setError(\"Account not found. You need to sign up first.\");\r\n        } else {\r\n          setError(msg);\r\n        }\r\n      } else {\r\n        if (status === 409 || msg.toLowerCase().includes('already registered')) {\r\n          setError(\"This email is already registered. Please login instead.\");\r\n        } else {\r\n          setError(msg);\r\n        }\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-[80vh] flex items-center justify-center px-6\">\r\n      <MotionDiv\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className={`max-w-md w-full rounded-[40px] shadow-2xl border p-10 flex flex-col gap-8 transition-all duration-700 ${\r\n          isNormalMode ? 'bg-white border-gray-100' : \r\n          isDark ? 'bg-[#131416] border-[#25282B]' : \r\n          'bg-black border-white'\r\n        }`}\r\n      >\r\n        <div className=\"flex justify-center\">\r\n          <div className={`w-12 h-12 p-2 rounded-2xl flex items-center justify-center transition-all duration-700 ${\r\n            isColored ? 'bg-[#2D62ED]/10' : \r\n            isLight ? 'bg-black/5' : \r\n            'bg-white/10'\r\n          }`}>\r\n            {isDark ? (\r\n              <LogoWhite className=\"w-full h-full\" />\r\n            ) : (\r\n              <LogoBlack className=\"w-full h-full\" style={{ fill: isColored ? '#2D62ED' : 'black' }} />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"text-center flex flex-col gap-2\">\r\n          <h2 className={`text-3xl font-black tracking-tighter transition-colors ${isColored ? 'text-[#2D62ED]' : ''}`}>\r\n            {isSignIn ? 'Welcome back.' : 'Create your workspace.'}\r\n          </h2>\r\n          <p className=\"opacity-60 text-sm font-medium\">\r\n            {isSignIn \r\n              ? 'Enter your credentials to access ShooraMail' \r\n              : 'Join thousands of users organizing their digital lives.'}\r\n          </p>\r\n        </div>\r\n\r\n      \r\n\r\n     \r\n\r\n        {error && (\r\n          <div className={`p-3 rounded-xl flex items-start gap-3 text-sm ${\r\n            isNormalMode ? 'bg-red-50 text-red-600' : 'bg-red-900/20 text-red-400'\r\n          }`}>\r\n            <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n            <div className=\"flex flex-col gap-1\">\r\n              <span>{error}</span>\r\n              {error.includes('not found') && isSignIn && (\r\n                <button \r\n                  onClick={() => onNavigate('signup')}\r\n                  className=\"text-left font-bold underline underline-offset-2 hover:opacity-80\"\r\n                >\r\n                  Sign up now\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <form className=\"flex flex-col gap-4\" onSubmit={handleAuth}>\r\n          {!isSignIn && (\r\n            <div className=\"flex gap-4\">\r\n              <div className=\"relative flex-1\">\r\n                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                <input \r\n                  required\r\n                  name=\"firstName\"\r\n                  value={formData.firstName}\r\n                  onChange={handleChange}\r\n                  type=\"text\" \r\n                  placeholder=\"First Name\"\r\n                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n                  }`}\r\n                />\r\n              </div>\r\n              <div className=\"relative flex-1\">\r\n                <User className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n                <input \r\n                  required\r\n                  name=\"lastName\"\r\n                  value={formData.lastName}\r\n                  onChange={handleChange}\r\n                  type=\"text\" \r\n                  placeholder=\"Last Name\"\r\n                  className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n                    isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n                  }`}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"relative\">\r\n            <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n            <input \r\n              required\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              type=\"email\" \r\n              placeholder=\"Email address\"\r\n              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n              }`}\r\n            />\r\n          </div>\r\n          <div className=\"relative\">\r\n            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\r\n            <input \r\n              required\r\n              name=\"password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              type=\"password\" \r\n              placeholder=\"Password\"\r\n              className={`w-full pl-12 pr-4 py-3.5 rounded-2xl border-2 border-transparent text-sm font-medium transition-all duration-500 outline-none ${\r\n                isNormalMode ? 'bg-gray-50 focus:border-[#2D62ED] focus:bg-white' : 'bg-white/5 focus:border-white focus:bg-white/10 text-white'\r\n              }`}\r\n            />\r\n          </div>\r\n          <button \r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className={`w-full py-4 mt-2 rounded-full font-bold shadow-xl transition-all duration-700 flex items-center justify-center gap-2 transform active:scale-95 ${\r\n              isColored ? 'bg-[#2D62ED] text-white hover:bg-blue-700' :\r\n              isLight ? 'bg-black text-white hover:bg-gray-800' : \r\n              'bg-white text-black hover:bg-gray-100'\r\n            } ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n          >\r\n            {isLoading ? 'Processing...' : (isSignIn ? 'Sign In' : 'Sign Up')}\r\n            <ArrowRight className=\"w-4 h-4\" />\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"text-center text-sm font-medium opacity-60\">\r\n          {isSignIn ? \"Don't have an account? \" : \"Already have an account? \"}\r\n          <button \r\n            onClick={() => onNavigate(isSignIn ? 'signup' : 'signin')}\r\n            className={`font-bold hover:underline underline-offset-4 transition-colors ${isColored ? 'text-[#2D62ED]' : isLight ? 'text-black' : 'text-white'}`}\r\n          >\r\n            {isSignIn ? 'Sign Up' : 'Log In'}\r\n          </button>\r\n        </p>\r\n      </MotionDiv>\r\n\r\n      <AnimatePresence>\r\n        {showSuccessModal && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\"\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.9, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.9, opacity: 0 }}\r\n              className={`max-w-sm w-full p-8 rounded-3xl shadow-2xl text-center flex flex-col items-center gap-4 ${\r\n                isNormalMode ? 'bg-white' : 'bg-[#131416] border border-[#25282B] text-white'\r\n              }`}\r\n            >\r\n              <div className=\"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-2\">\r\n                <CheckCircle className=\"w-8 h-8\" />\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold\">Registration successful!</h3>\r\n              <p className=\"opacity-60\">A verification link has been sent to your inbox. Please verify to continue.</p>\r\n              <button\r\n                onClick={() => { setShowSuccessModal(false); onNavigate('signin'); }}\r\n                className=\"w-full py-3 rounded-xl bg-black text-white font-bold mt-4 hover:bg-gray-800 transition-colors\"\r\n              >\r\n                Go to Login\r\n              </button>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthPage;"
        }
    ]
}